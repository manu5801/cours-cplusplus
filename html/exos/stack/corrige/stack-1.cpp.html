<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
	<title>/home/manu/Documents/devt/cours-cplusplus/html/exos/stack/corrige/stack-1.cpp</title>
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
	<meta name="generator" content="Geany 1.27" />
	<meta name="date" content="2019-09-30T16:50:30+0200" />
	<style type="text/css">
	body
	{
		font-family: Monospace, monospace;
		font-size: 10pt;
	}
	.style_2
	{
		color: #d00000;
		background-color: #ffffff;
	}
	.style_3
	{
		color: #3f5fbf;
		background-color: #ffffff;
	}
	.style_4
	{
		color: #007f00;
		background-color: #ffffff;
	}
	.style_5
	{
		color: #00007f;
		background-color: #ffffff;
		font-weight: bold;
	}
	.style_6
	{
		color: #ff8000;
		background-color: #ffffff;
	}
	.style_9
	{
		color: #007f7f;
		background-color: #ffffff;
	}
	.style_10
	{
		color: #301010;
		background-color: #ffffff;
	}
	.style_11
	{
		color: #000000;
		background-color: #ffffff;
	}
	.style_16
	{
		color: #991111;
		background-color: #ffffff;
		font-weight: bold;
	}
	.style_19
	{
		color: #0000d0;
		background-color: #ffffff;
		font-weight: bold;
	}

	</style>
</head>

<body>
<p>
<span class="style_9">#include&nbsp;</span><span class="style_6">&lt;iostream&gt;</span><br />
<span class="style_9">#include&nbsp;</span><span class="style_6">&lt;cstdlib&gt;</span><br />
<span class="style_5">using&nbsp;namespace&nbsp;</span><span class="style_11">std</span><span class="style_10">;</span><br />
<br />
<span class="style_3">/**********</span><br />
&nbsp;<span class="style_3">*&nbsp;La&nbsp;classe&nbsp;Stack&nbsp;permet&nbsp;d'implémenter&nbsp;des&nbsp;piles&nbsp;d'entiers</span><br />
&nbsp;<span class="style_3">*&nbsp;</span><br />
&nbsp;<span class="style_3">*&nbsp;On&nbsp;passe&nbsp;un&nbsp;entier&nbsp;au&nbsp;constructuer,&nbsp;qui&nbsp;sera&nbsp;la&nbsp;taille&nbsp;de&nbsp;la&nbsp;pile</span><br />
&nbsp;<span class="style_3">*&nbsp;</span><br />
&nbsp;<span class="style_3">*&nbsp;On&nbsp;ne&nbsp;peut&nbsp;faire&nbsp;que&nbsp;deux&nbsp;opérations:&nbsp;</span><br />
&nbsp;<span class="style_3">*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push&nbsp;(mettre&nbsp;un&nbsp;entier&nbsp;sur&nbsp;la&nbsp;pile)</span><br />
&nbsp;<span class="style_3">*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pop&nbsp;&nbsp;(retirer&nbsp;l'entier&nbsp;du&nbsp;haut&nbsp;de&nbsp;la&nbsp;pile)</span><br />
&nbsp;<span class="style_3">*&nbsp;</span><br />
&nbsp;<span class="style_3">*&nbsp;En&nbsp;cas&nbsp;d'erreur&nbsp;(débordement&nbsp;de&nbsp;pile,&nbsp;erreur&nbsp;d'allocation,&nbsp;etc.&nbsp;</span><br />
&nbsp;<span class="style_3">*&nbsp;on&nbsp;sort&nbsp;du&nbsp;programme:&nbsp;violent&nbsp;mais&nbsp;efficace&nbsp;!</span><br />
&nbsp;<span class="style_3">*&nbsp;</span><br />
&nbsp;<span class="style_3">*&nbsp;c++&nbsp;-std=c++11&nbsp;stack-1.cpp&nbsp;-o&nbsp;stack-1</span><br />
&nbsp;<span class="style_3">*&nbsp;</span><br />
&nbsp;<span class="style_3">**********/</span><br />
<span class="style_5">class&nbsp;</span><span class="style_19">Stack&nbsp;</span><span class="style_10">{&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<br />
<span class="style_5">public</span><span class="style_10">:</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_19">Stack</span><span class="style_10">(</span><span class="style_16">size_t&nbsp;</span><span class="style_11">n</span><span class="style_10">)&nbsp;:&nbsp;</span><span class="style_11">size</span><span class="style_10">(</span><span class="style_11">n</span><span class="style_10">),&nbsp;</span><span class="style_11">top</span><span class="style_10">(</span><span class="style_4">0</span><span class="style_10">)&nbsp;{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">if&nbsp;</span><span class="style_10">(</span><span class="style_11">debug</span><span class="style_10">)&nbsp;{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">cout&nbsp;</span><span class="style_10">&lt;&lt;&nbsp;</span><span class="style_6">"Ici&nbsp;constructeur&nbsp;-&nbsp;size&nbsp;=&nbsp;"&nbsp;</span><span class="style_10">&lt;&lt;&nbsp;</span><span class="style_11">size&nbsp;</span><span class="style_10">&lt;&lt;&nbsp;</span><span class="style_11">endl</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">base&nbsp;</span><span class="style_10">=&nbsp;(</span><span class="style_5">int&nbsp;</span><span class="style_10">*)&nbsp;</span><span class="style_11">malloc</span><span class="style_10">(</span><span class="style_11">size</span><span class="style_10">*</span><span class="style_5">sizeof</span><span class="style_10">(</span><span class="style_5">int</span><span class="style_10">));</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">if&nbsp;</span><span class="style_10">(</span><span class="style_11">base&nbsp;</span><span class="style_10">==&nbsp;</span><span class="style_5">nullptr</span><span class="style_10">)&nbsp;{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">exit</span><span class="style_10">(</span><span class="style_4">1</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">for&nbsp;</span><span class="style_10">(</span><span class="style_5">int&nbsp;</span><span class="style_11">i</span><span class="style_10">=</span><span class="style_4">0</span><span class="style_10">;&nbsp;</span><span class="style_11">i</span><span class="style_10">&lt;</span><span class="style_11">size</span><span class="style_10">;&nbsp;</span><span class="style_11">i</span><span class="style_10">++)&nbsp;{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">base</span><span class="style_10">[</span><span class="style_11">i</span><span class="style_10">]&nbsp;=&nbsp;</span><span class="style_4">0</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">};</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">~</span><span class="style_19">Stack</span><span class="style_10">()&nbsp;{&nbsp;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">free</span><span class="style_10">(</span><span class="style_11">base</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">base&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_5">nullptr</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">cout&nbsp;</span><span class="style_10">&lt;&lt;&nbsp;</span><span class="style_6">"Ici&nbsp;destructeur&nbsp;-&nbsp;&nbsp;size&nbsp;=&nbsp;"&nbsp;</span><span class="style_10">&lt;&lt;&nbsp;</span><span class="style_11">size&nbsp;</span><span class="style_10">&lt;&lt;&nbsp;</span><span class="style_11">endl</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">};</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">void&nbsp;</span><span class="style_11">push&nbsp;</span><span class="style_10">(</span><span class="style_5">int</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">int&nbsp;</span><span class="style_11">pop</span><span class="style_10">();</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_16">size_t&nbsp;</span><span class="style_11">getLength</span><span class="style_10">()&nbsp;</span><span class="style_5">const&nbsp;</span><span class="style_10">{</span><span class="style_5">return&nbsp;</span><span class="style_11">top</span><span class="style_10">;};</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">static&nbsp;void&nbsp;</span><span class="style_11">setDebug</span><span class="style_10">()&nbsp;{&nbsp;</span><span class="style_11">debug&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_5">true</span><span class="style_10">;&nbsp;};</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">static&nbsp;void&nbsp;</span><span class="style_11">clrDebug</span><span class="style_10">()&nbsp;{&nbsp;</span><span class="style_11">debug&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_5">false</span><span class="style_10">;};</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<br />
<span class="style_5">private</span><span class="style_10">:</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_16">size_t&nbsp;</span><span class="style_11">size</span><span class="style_10">;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="style_2">//&nbsp;La&nbsp;taille&nbsp;max&nbsp;de&nbsp;la&nbsp;pile</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">int&nbsp;</span><span class="style_10">*</span><span class="style_11">base</span><span class="style_10">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="style_2">//&nbsp;L'adresse&nbsp;de&nbsp;base&nbsp;de&nbsp;la&nbsp;pile</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_16">size_t&nbsp;</span><span class="style_11">top</span><span class="style_10">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="style_2">//&nbsp;Le&nbsp;nombre&nbsp;d'éléments&nbsp;dans&nbsp;la&nbsp;pile</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">static&nbsp;bool&nbsp;</span><span class="style_11">debug</span><span class="style_10">;</span><br />
<span class="style_10">};</span><br />
<br />
<span class="style_5">bool&nbsp;</span><span class="style_19">Stack</span><span class="style_10">::</span><span class="style_11">debug&nbsp;</span><span class="style_10">=&nbsp;</span><span class="style_5">false</span><span class="style_10">;</span><br />
<br />
<span class="style_5">void&nbsp;</span><span class="style_19">Stack</span><span class="style_10">::</span><span class="style_11">push&nbsp;</span><span class="style_10">(</span><span class="style_5">int&nbsp;</span><span class="style_11">i</span><span class="style_10">)&nbsp;{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">if&nbsp;</span><span class="style_10">(</span><span class="style_11">top&nbsp;</span><span class="style_10">&lt;&nbsp;</span><span class="style_11">size</span><span class="style_10">)&nbsp;{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">base</span><span class="style_10">[</span><span class="style_11">top</span><span class="style_10">++]&nbsp;=&nbsp;</span><span class="style_11">i</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}&nbsp;</span><span class="style_5">else&nbsp;</span><span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">exit</span><span class="style_10">(</span><span class="style_4">1</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
<span class="style_10">}</span><br />
<br />
<span class="style_5">int&nbsp;</span><span class="style_19">Stack</span><span class="style_10">::</span><span class="style_11">pop</span><span class="style_10">()&nbsp;{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">if&nbsp;</span><span class="style_10">(</span><span class="style_11">top</span><span class="style_10">&gt;</span><span class="style_4">0</span><span class="style_10">)&nbsp;{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_5">return&nbsp;</span><span class="style_11">base</span><span class="style_10">[--</span><span class="style_11">top</span><span class="style_10">];</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}&nbsp;</span><span class="style_5">else&nbsp;</span><span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">exit</span><span class="style_10">(</span><span class="style_4">1</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
<span class="style_10">}</span><br />
<br />
<br />
<span class="style_5">int&nbsp;</span><span class="style_11">main</span><span class="style_10">()&nbsp;{</span><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_19">Stack</span><span class="style_10">::</span><span class="style_11">setDebug</span><span class="style_10">();</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_19">Stack&nbsp;</span><span class="style_11">s</span><span class="style_10">(</span><span class="style_4">10</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">cout&nbsp;</span><span class="style_10">&lt;&lt;&nbsp;</span><span class="style_6">"pile&nbsp;s&nbsp;creee"&nbsp;</span><span class="style_10">&lt;&lt;&nbsp;</span><span class="style_11">endl</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">{</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_19">Stack&nbsp;</span><span class="style_11">s1</span><span class="style_10">(</span><span class="style_4">20</span><span class="style_10">);</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">cout&nbsp;</span><span class="style_10">&lt;&lt;&nbsp;</span><span class="style_6">"pile&nbsp;s1&nbsp;creee"&nbsp;</span><span class="style_10">&lt;&lt;&nbsp;</span><span class="style_11">endl</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_10">}</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">cout&nbsp;</span><span class="style_10">&lt;&lt;&nbsp;</span><span class="style_6">"pile&nbsp;s1&nbsp;detruite"&nbsp;</span><span class="style_10">&lt;&lt;&nbsp;</span><span class="style_11">endl</span><span class="style_10">;</span><br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">cout&nbsp;</span><span class="style_10">&lt;&lt;&nbsp;</span><span class="style_6">"pile&nbsp;s&nbsp;bientot&nbsp;detruite"&nbsp;</span><span class="style_10">&lt;&lt;&nbsp;</span><span class="style_11">endl</span><span class="style_10">;</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;<span class="style_11">cout&nbsp;</span><span class="style_10">&lt;&lt;&nbsp;</span><span class="style_6">"FINI&nbsp;!!!"&nbsp;</span><span class="style_10">&lt;&lt;&nbsp;</span><span class="style_11">endl</span><span class="style_10">;&nbsp;</span><br />
<span class="style_10">}</span><br />

</p>
</body>
</html>
